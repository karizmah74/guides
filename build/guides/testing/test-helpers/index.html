
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ember.js - Testing: Test Helpers</title>
    <meta property="st:title" content="Testing: Test Helpers" />
    <link rel="shortcut icon" href="/images/favicon.png" />
    <!--[if lte IE 7 ]><link href="../../../stylesheets/fonts/fontello-ie7.css" rel="stylesheet" type="text/css" /><![endif]-->
    <link href="../../../stylesheets/site.css" rel="stylesheet" type="text/css" />
    <link href="/blog/feed.xml" rel="alternate" type="application/atom+xml" title="Ember.js - Blog" />
    
  </head>

  <body class="guides guides_testing guides_testing_test-helpers guides_testing_test-helpers_index">

    <script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
    <script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js" type="text/javascript"></script>

    <!--[if lt IE 9]>
      <script type="text/javascript" src="/javascripts/common-old-ie.js"></script>
    <![endif]-->
    <!--[if gte IE 9]><!-->
      <script type="text/javascript" src="/javascripts/common-modern.js"></script>
    <!--<![endif]-->

    <div id="header">
      <div id="wrapper">
        <a id="logo" href="/">&nbsp;</a>
        <ul id="nav">
          <li><a href="/about">about</a></li>
          <li class="active"><a href="/guides">guides</a></li>
          <li><a href="/api">api</a></li>
          <li><a href="/community">community</a></li>
          <li><a href="/blog">blog</a></li>
          <li><a href="/builds">builds</a></li>
          <li id="search">
            <form>
              <input type="text" id="st-search-input" class="st-search-input" />
            </form>
            <div id="st-results-container"></div>
          </li>
        </ul>

        <div id="github">
          <a href="https://github.com/emberjs/ember.js"><i class="icon-fork"></i>Fork Us!</a>
        </div>
      </div>
    </div>

    

    <div id="content-wrapper">
        <div id="sidebar">
              <ol id="toc-list">
          <li class="level-1">
            <a href="../../getting-started/">Getting Started</a>
            <ol>
        
            <li class="level-3">
              <a href="../../getting-started/">Getting Started</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/planning-the-application/">Planning The Application</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/creating-a-static-mockup/">Creating a Static Mockup</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/obtaining-emberjs-and-dependencies/">Obtaining Ember.js and Dependencies</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/adding-a-route-and-template/">Adding the First Route and Template</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/modeling-data/">Modeling Data</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/using-fixtures/">Using Fixtures</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/displaying-model-data/">Displaying Model Data</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/displaying-a-models-completeness/">Displaying a Model's Complete State</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/creating-a-new-model/">Creating a New Model Instance</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/marking-a-model-as-complete-incomplete/">Marking a Model as Complete or Incomplete</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/displaying-the-number-of-incomplete-todos/">Displaying the Number of Incomplete Todos</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/toggle-todo-editing-state/">Toggling between Showing and Editing States</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/accepting-edits/">Accepting Edits</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/deleting-todos/">Deleting a Model</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/adding-child-routes/">Adding Child Routes</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/show-only-incomplete-todos/">Transitioning to Show Only Incomplete Todos</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/show-only-complete-todos/">Transitioning to Show Only Complete Todos</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/show-all-todos-again/">Transitioning back to Show All Todos</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/display-a-button-to-remove-completed-todos/">Displaying a Button to Remove All Completed Todos</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/show-when-all-todos-are-complete/">Indicating When All Todos Are Complete</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/toggle-all-todos/">Toggling All Todos Between Complete and Incomplete</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/using-other-adapters/">Replacing the Fixture Adapter with Another Adapter</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../getting-ember/">Getting Ember</a>
            <ol>
        
            <li class="level-3">
              <a href="../../getting-ember/">Getting Ember</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../concepts/core-concepts/">Concepts</a>
            <ol>
        
            <li class="level-3">
              <a href="../../concepts/core-concepts/">Core Concepts</a>
            </li>
          
            <li class="level-3">
              <a href="../../concepts/naming-conventions/">Naming Conventions</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../object-model/classes-and-instances/">The Object Model</a>
            <ol>
        
            <li class="level-3">
              <a href="../../object-model/classes-and-instances/">Classes and Instances</a>
            </li>
          
            <li class="level-3">
              <a href="../../object-model/computed-properties/">Computed Properties</a>
            </li>
          
            <li class="level-3">
              <a href="../../object-model/computed-properties-and-aggregate-data/">Computed Properties and Aggregate Data with @each</a>
            </li>
          
            <li class="level-3">
              <a href="../../object-model/observers/">Observers</a>
            </li>
          
            <li class="level-3">
              <a href="../../object-model/bindings/">Bindings</a>
            </li>
          
            <li class="level-3">
              <a href="../../object-model/reopening-classes-and-instances/">Reopening Classes and Instances</a>
            </li>
          
            <li class="level-3">
              <a href="../../object-model/what-do-i-use-when/">Bindings, Observers, Computed Properties: What Do I Use When?</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../application/">Application</a>
            <ol>
        
            <li class="level-3">
              <a href="../../application/">Introduction</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../templates/the-application-template/">Templates</a>
            <ol>
        
            <li class="level-3">
              <a href="../../templates/the-application-template/">The Application Template</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/handlebars-basics/">Handlebars Basics</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/conditionals/">Conditionals</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/displaying-a-list-of-items/">Displaying a List of Items</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/binding-element-attributes/">Binding Element Attributes</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/binding-element-class-names/">Binding Element Class Names</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/links/">Links</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/actions/">Actions</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/input-helpers/">Input Helpers</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/development-helpers/">Development Helpers</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/rendering-with-helpers/">Rendering with Helpers</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/writing-helpers/">Writing Helpers</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../routing/">Routing</a>
            <ol>
        
            <li class="level-3">
              <a href="../../routing/">Introduction</a>
            </li>
          
            <li class="level-3">
              <a href="../../routing/defining-your-routes/">Defining Your Routes</a>
            </li>
          
            <li class="level-3">
              <a href="../../routing/generated-objects/">Generated Objects</a>
            </li>
          
            <li class="level-3">
              <a href="../../routing/specifying-a-routes-model/">Specifying a Route's Model</a>
            </li>
          
            <li class="level-3">
              <a href="../../routing/setting-up-a-controller/">Setting Up a Controller</a>
            </li>
          
            <li class="level-3">
              <a href="../../routing/rendering-a-template/">Rendering a Template</a>
            </li>
          
            <li class="level-3">
              <a href="../../routing/redirection/">Redirecting</a>
            </li>
          
            <li class="level-3">
              <a href="../../routing/specifying-the-location-api/">Specifying the URL Type</a>
            </li>
          
            <li class="level-3">
              <a href="../../routing/query-params/">Query Parameters</a>
            </li>
          
            <li class="level-3">
              <a href="../../routing/asynchronous-routing/">Asynchronous Routing</a>
            </li>
          
            <li class="level-3">
              <a href="../../routing/loading-and-error-substates/">Loading / Error Substates</a>
            </li>
          
            <li class="level-3">
              <a href="../../routing/preventing-and-retrying-transitions/">Preventing and Retrying Transitions</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../components/">Components</a>
            <ol>
        
            <li class="level-3">
              <a href="../../components/">Introduction</a>
            </li>
          
            <li class="level-3">
              <a href="../../components/defining-a-component/">Defining a Component</a>
            </li>
          
            <li class="level-3">
              <a href="../../components/passing-properties-to-a-component/">Passing Properties to a Component</a>
            </li>
          
            <li class="level-3">
              <a href="../../components/wrapping-content-in-a-component/">Wrapping Content in a Component</a>
            </li>
          
            <li class="level-3">
              <a href="../../components/customizing-a-components-element/">Customizing a Component's Element</a>
            </li>
          
            <li class="level-3">
              <a href="../../components/handling-user-interaction-with-actions/">Handling User Interaction with Actions</a>
            </li>
          
            <li class="level-3">
              <a href="../../components/sending-actions-from-components-to-your-application/">Sending Actions from Components to Your Application</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../controllers/">Controllers</a>
            <ol>
        
            <li class="level-3">
              <a href="../../controllers/">Introduction</a>
            </li>
          
            <li class="level-3">
              <a href="../../controllers/representing-a-single-model-with-objectcontroller/">Representing a Single Model with ObjectController</a>
            </li>
          
            <li class="level-3">
              <a href="../../controllers/representing-multiple-models-with-arraycontroller/">Representing Multiple Models with ArrayController</a>
            </li>
          
            <li class="level-3">
              <a href="../../controllers/dependencies-between-controllers/">Managing Dependencies Between Controllers</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../models/">Models</a>
            <ol>
        
            <li class="level-3">
              <a href="../../models/">Introduction</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/defining-models/">Defining Models</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/creating-and-deleting-records/">Creating and Deleting Records</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/pushing-records-into-the-store/">Pushing Records into the Store</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/persisting-records/">Persisting Records</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/finding-records/">Finding Records</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/working-with-records/">Working with Records</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/the-fixture-adapter/">Using Fixtures</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/the-rest-adapter/">The Rest Adapter</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/connecting-to-an-http-server/">Connecting to an HTTP Server</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/handling-metadata/">Handling Metadata</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/customizing-adapters/">Customizing Adapters</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/frequently-asked-questions/">Frequently Asked Questions</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../views/">Views</a>
            <ol>
        
            <li class="level-3">
              <a href="../../views/">Introduction</a>
            </li>
          
            <li class="level-3">
              <a href="../../views/defining-a-view/">Defining a View</a>
            </li>
          
            <li class="level-3">
              <a href="../../views/handling-events/">Handling Events</a>
            </li>
          
            <li class="level-3">
              <a href="../../views/inserting-views-in-templates/">Inserting Views in Templates</a>
            </li>
          
            <li class="level-3">
              <a href="../../views/adding-layouts-to-views/">Adding Layouts to Views</a>
            </li>
          
            <li class="level-3">
              <a href="../../views/customizing-a-views-element/">Customizing a View's Element</a>
            </li>
          
            <li class="level-3">
              <a href="../../views/built-in-views/">Built-in Views</a>
            </li>
          
            <li class="level-3">
              <a href="../../views/manually-managing-view-hierarchy/">Manually Managing View Hierarchy</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../enumerables/">Enumerables</a>
            <ol>
        
            <li class="level-3">
              <a href="../../enumerables/">Introduction</a>
            </li>
          </ol></li>
          <li class="level-1 selected">
            <a href="../">Testing</a>
            <ol class='selected'>
        
            <li class="level-3">
              <a href="../">Introduction</a>
            </li>
          
            <li class="level-3">
              <a href="../integration/">Integration Tests</a>
            </li>
          
            <li class="level-3 sub-selected">
              <a href="./">Test Helpers</a>
            </li>
          
            <li class="level-3">
              <a href="../testing-user-interaction/">Testing User Interaction</a>
            </li>
          
            <li class="level-3">
              <a href="../unit-testing-basics/">Unit Testing Basics</a>
            </li>
          
            <li class="level-3">
              <a href="../unit-test-helpers/">Unit Test Helpers</a>
            </li>
          
            <li class="level-3">
              <a href="../testing-components/">Testing Components</a>
            </li>
          
            <li class="level-3">
              <a href="../testing-controllers/">Testing Controllers</a>
            </li>
          
            <li class="level-3">
              <a href="../testing-routes/">Testing Routes</a>
            </li>
          
            <li class="level-3">
              <a href="../testing-models/">Testing Models</a>
            </li>
          
            <li class="level-3">
              <a href="../test-runners/">Automating Tests with Runners</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../configuring-ember/disabling-prototype-extensions/">Configuring Ember.js</a>
            <ol>
        
            <li class="level-3">
              <a href="../../configuring-ember/disabling-prototype-extensions/">Disabling Prototype Extensions</a>
            </li>
          
            <li class="level-3">
              <a href="../../configuring-ember/embedding-applications/">Embedding Applications</a>
            </li>
          
            <li class="level-3">
              <a href="../../configuring-ember/feature-flags/">Feature Flags</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../cookbook/">Cookbook</a>
            <ol>
        
            <li class="level-3">
              <a href="../../cookbook/">Introduction</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/cookbook/contributing.html">Contributing</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/cookbook/user_interface_and_interaction.html">User Interface and Interaction</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/cookbook/event_handling_and_data_binding.html">Event Handling & Data Binding</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/cookbook/helpers_and_components.html">Helpers & Components</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/cookbook/working_with_objects.html">Working with Objects</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/deprecations.html">Deprecations</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/deprecations.html">Deprecations/index</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../understanding-ember/the-view-layer/">Understanding Ember.js</a>
            <ol>
        
            <li class="level-3">
              <a href="../../understanding-ember/the-view-layer/">The View Layer</a>
            </li>
          
            <li class="level-3">
              <a href="../../understanding-ember/managing-asynchrony/">Managing Asynchrony</a>
            </li>
          
            <li class="level-3">
              <a href="../../understanding-ember/keeping-templates-up-to-date/">Keeping Templates Up-to-Date</a>
            </li>
          
            <li class="level-3">
              <a href="../../understanding-ember/debugging/">Debugging</a>
            </li>
          
            <li class="level-3">
              <a href="../../understanding-ember/run-loop/">The Run Loop</a>
            </li>
          
            <li class="level-3">
              <a href="../../understanding-ember/dependency-injection-and-service-lookup/">Dependency Injection & Service Lookup</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../contributing/adding-new-features/">Contributing to Ember.js</a>
            <ol>
        
            <li class="level-3">
              <a href="../../contributing/adding-new-features/">Adding New Features</a>
            </li>
          
            <li class="level-3">
              <a href="../../contributing/repositories/">Repositories</a>
            </li>
          </ol></li></ol>

          <div id="back-to-top"><a id="back-top-top" href="#">&#11014; Back to Top</a></div>
        </div>
      <div id="content" class="has-sidebar">
        
  <div class="chapter">
    
        <h1>Test Helpers
          <a href="https://github.com/emberjs/website/tree/master/source/guides/testing/test-helpers.md" target="_blank" class="edit-page icon-pencil">Edit Page</a>
        </h1>
      
    <hr>
    <p>One of the major issues in testing web applications is that all code is
event-driven, therefore has the potential to be asynchronous (ie output can
happen out of sequence from input). This has the ramification that code can be
executed in any order.</p>

<p>An example may help here: Let&#39;s say a user clicks two buttons, one after another
and both load data from different servers. They take different times to respond.</p>

<p>When writing your tests, you need to be keenly aware of the fact that you cannot
be sure that the response will return immediately after you make your requests,
therefore your assertion code (the &quot;tester&quot;) needs to wait for the thing being
tested (the &quot;testee&quot;) to be in a synchronized state. In the example above, that
would be when both servers have responded and the test code can go about its
business checking the data (whether it is mock data, or real data).</p>

<p>This is why all Ember&#39;s test helpers are wrapped in code that ensures Ember is
back in a synchronized state when it makes its assertions. It saves you from
having to wrap everything in code that does that, and it makes it easier to read
your tests because there&#39;s less boilerplate in them.</p>

<p>Ember includes several helpers to facilitate integration testing. There are two
types of helpers: <strong>asynchronous</strong> and <strong>synchronous</strong>.</p>
<h3 class='anchorable-toc' id='toc_asynchronous-helpers'>Asynchronous Helpers</h3>
<p>Asynchronous helpers are &quot;aware&quot; of (and wait for) asynchronous behavior within
your application, making it much easier to write deterministic tests.</p>

<p>Also, these helpers register themselves in the order that you call them and will
be run in a chain; each one is only called after the previous one finishes, in a
chain. You can rest assured, therefore, that the order you call them in will also
be their execution order, and that the previous helper has finished before the
next one starts.</p>

<ul>
<li><code>visit(url)</code>

<ul>
<li>Visits the given route and returns a promise that fulfills when all resulting
async behavior is complete.</li>
</ul></li>
<li><code>fillIn(selector, text)</code>

<ul>
<li>Fills in the selected input with the given text and returns a promise that
fulfills when all resulting async behavior is complete.</li>
</ul></li>
<li><code>click(selector)</code>

<ul>
<li>Clicks an element and triggers any actions triggered by the element&#39;s <code>click</code>
event and returns a promise that fulfills when all resulting async behavior
is complete.</li>
</ul></li>
<li><code>keyEvent(selector, type, keyCode)</code>

<ul>
<li>Simulates a key event type, e.g. <code>keypress</code>, <code>keydown</code>, <code>keyup</code> with the
desired keyCode on element found by the selector.</li>
</ul></li>
<li><code>triggerEvent(selector, type, options)</code>

<ul>
<li>Triggers the given event, e.g. <code>blur</code>, <code>dblclick</code> on the element identified
by the provided selector.</li>
</ul></li>
</ul>
<h3 class='anchorable-toc' id='toc_synchronous-helpers'>Synchronous Helpers</h3>
<p>Synchronous helpers are performed immediately when triggered.</p>

<ul>
<li><code>find(selector, context)</code>

<ul>
<li>Finds an element within the app&#39;s root element and within the context
(optional). Scoping to the root element is especially useful to avoid
conflicts with the test framework&#39;s reporter, and this is done by default
if the context is not specified.</li>
</ul></li>
<li><code>currentPath()</code>

<ul>
<li>Returns the current path.</li>
</ul></li>
<li><code>currentRouteName()</code>

<ul>
<li>Returns the currently active route name.</li>
</ul></li>
<li><code>currentURL()</code>

<ul>
<li>Returns the current URL.</li>
</ul></li>
</ul>
<h3 class='anchorable-toc' id='toc_wait-helpers'>Wait Helpers</h3>
<p>The <code>andThen</code> helper will wait for all preceding asynchronous helpers to
complete prior to progressing forward. Let&#39;s take a look at the following
example.</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
</pre></td>
  <td class="code"><pre>test(<span class="string"><span class="delimiter">'</span><span class="content">simple test</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>() {
  expect(<span class="integer">1</span>); <span class="comment">// Ensure that we will perform one assertion</span>

  visit(<span class="string"><span class="delimiter">'</span><span class="content">/posts/new</span><span class="delimiter">'</span></span>);
  fillIn(<span class="string"><span class="delimiter">'</span><span class="content">input.title</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">My new post</span><span class="delimiter">'</span></span>);
  click(<span class="string"><span class="delimiter">'</span><span class="content">button.submit</span><span class="delimiter">'</span></span>);

  <span class="comment">// Wait for asynchronous helpers above to complete</span>
  andThen(<span class="keyword">function</span>() {
    equal(find(<span class="string"><span class="delimiter">'</span><span class="content">ul.posts li:last</span><span class="delimiter">'</span></span>).text(), <span class="string"><span class="delimiter">'</span><span class="content">My new post</span><span class="delimiter">'</span></span>);
  });
});
</pre></td>
</tr></table>
</div></div>
<p>First we tell qunit that this test should have one assertion made by the end 
of the test by calling <code>expect</code> with an argument of <code>1</code>. We then visit the new
posts URL &quot;/posts/new&quot;, enter the text &quot;My new post&quot; into an input control
with the CSS class &quot;title&quot;, and click on a button whose class is &quot;submit&quot;.</p>

<p>We then make a call to the <code>andThen</code> helper which will wait for the preceding
asynchronous test helpers to complete (specifically, <code>andThen</code> will only be
called <strong>after</strong> the new posts URL was visited, the text filled in and the
submit button was clicked, <strong>and</strong> the browser has returned from doing whatever
those actions required). Note <code>andThen</code> has a single argument of the function
that contains the code to execute after the other test helpers have finished.</p>

<p>In the <code>andThen</code> helper, we finally make our call to equal which makes an
assertion that the text found in the last li of the ul whose class is &quot;posts&quot;
is equal to &quot;My new post&quot;.</p>
<h3 class='anchorable-toc' id='toc_custom-test-helpers'>Custom Test Helpers</h3>
<p><code>Ember.Test.registerHelper</code> and <code>Ember.Test.registerAsyncHelper</code> are used to
register test helpers that will be injected when <code>App.injectTestHelpers</code> is
called. The difference between <code>Ember.Test.registerHelper</code> and
<code>Ember.Test.registerAsyncHelper</code> is that the latter will not run until any
previous async helper has completed and any subsequent async helper will wait
for it to finish before running.</p>

<p>The helper method will always be called with the current Application as the
first parameter. Helpers need to be registered prior to calling
<code>App.injectTestHelpers()</code>.</p>

<p>Here is an example of a non-async helper:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td>
  <td class="code"><pre>Ember.Test.registerHelper(<span class="string"><span class="delimiter">'</span><span class="content">shouldHaveElementWithCount</span><span class="delimiter">'</span></span>,
  <span class="keyword">function</span>(app, selector, n, context) {
    <span class="keyword">var</span> el = findWithAssert(selector, context);
    <span class="keyword">var</span> count = el.length;
    equal(n, count, <span class="string"><span class="delimiter">'</span><span class="content">found </span><span class="delimiter">'</span></span> + count + <span class="string"><span class="delimiter">'</span><span class="content"> times</span><span class="delimiter">'</span></span>);
  }
);

<span class="comment">// shouldHaveElementWithCount(&quot;ul li&quot;, 3);</span>
</pre></td>
</tr></table>
</div></div>
<p>Here is an example of an async helper:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
</pre></td>
  <td class="code"><pre>Ember.Test.registerAsyncHelper(<span class="string"><span class="delimiter">'</span><span class="content">dblclick</span><span class="delimiter">'</span></span>,
  <span class="keyword">function</span>(app, selector, context) {
    <span class="keyword">var</span> <span class="predefined">$el</span> = findWithAssert(selector, context);
    Ember.run(<span class="keyword">function</span>() {
      <span class="predefined">$el</span>.dblclick();
    });
  }
);

<span class="comment">// dblclick(&quot;#person-1&quot;)</span>
</pre></td>
</tr></table>
</div></div>
<p>Async helpers also come in handy when you want to group interaction
into one helper. For example:</p>
<div class="highlight javascript "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td>
  <td class="code"><pre>Ember.Test.registerAsyncHelper(<span class="string"><span class="delimiter">'</span><span class="content">addContact</span><span class="delimiter">'</span></span>,
  <span class="keyword">function</span>(app, name, context) {
    fillIn(<span class="string"><span class="delimiter">'</span><span class="content">#name</span><span class="delimiter">'</span></span>, name);
    click(<span class="string"><span class="delimiter">'</span><span class="content">button.create</span><span class="delimiter">'</span></span>);
  }
);

<span class="comment">// addContact(&quot;Bob&quot;);</span>
<span class="comment">// addContact(&quot;Dan&quot;);</span>
</pre></td>
</tr></table>
</div></div><h4 class='anchorable-toc' id='toc_example'>Example</h4>
<p>Here is an example using both <code>registerHelper</code> and
<code>registerAsyncHelper</code>.</p>

<p><a class="jsbin-embed" href="http://jsbin.com/yoyatiluta/1/embed?output">Custom Test Helpers</a></p>

    
      <footer>
        
          <a class="previous-guide" href="../guides/testing/integration">
            ← Integration Tests
          </a>
         
        <a class="next-guide" href="/guides/testing/testing-user-interaction">
          Testing User Interaction →
        </a>
      
      </footer>
      
  </div>

      </div>
    </div>

    <div id="footer">
      <div id="footer-wrapper">
        <div class="info">
          Copyright 2015 <a href="http://tilde.io">Tilde Inc.</a><br>
          <a href="/team">Core Team</a> | <a href="/sponsors">Sponsors</a> | <a href="/legal">Legal</a></br>
          <a href="/guidelines">Community Guidelines</a>
        </div>
        <div class="statement">Ember.js is free, open source and always will be.</div>
        <div class="links">
          <a class="twitter" href="http://twitter.com/emberjs">
            <i class="icon-twitter"></i><span>Twitter</span>
          </a>
          <a class="github" href="https://github.com/emberjs/ember.js">
            <i class="icon-github"></i><span>GitHub</span>
          </a>
          <a class="googleplus" href="https://plus.google.com/communities/106387049790387471205">
            <i class="icon-gplus"></i><span>Google+</span>
          </a>
        </div>
      </div>
    </div>

        <script type="text/javascript" src="/javascripts/guides.js"></script>
    <script src="http://static.jsbin.com/js/embed.js"></script>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
      _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
      _gaq.push(['_setAccount', 'UA-27675533-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
